<!-- 
    How to create a LOOP in a web a page to do something (like
    render text) and stop it when needed.

    Working example:
    https://codepen.io/riccardo-giovarelli/pen/KKxyZNQ
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Example</title>
</head>

<body>
    <button>Stop doing something</button>
    <hr>
    <h1 id="stupid-text"> </h1>
    <script>
        window.onload = (event) => {
            // New interval
            var loop = setInterval(doSomething, 500);

            // Interval callback
            function doSomething() {
                document.getElementById("stupid-text").innerHTML =
                    document.getElementById("stupid-text").innerHTML == "" ? "I'm doing something!" : "";
            }

            // Click handler
            document.querySelector("button").addEventListener(
                "click",
                () => {
                    // Kill interval
                    clearInterval(loop);
                }
            );
        };
    </script>
</body>

</html>